# Применения

## К-я порядковая статистика

$K$-й **порядковой статистикой** последовательности называют значение, стоящее на $K$-й позиции после сортировки по возрастанию.

### Условие

Дано целое число $K$ и $Q$ запросов "добавить значение $v$".

После каждого запроса вывести $K$-ю порядковую статистику (если в наличии $K$ или более значений).

### Идея решения

Заметим, что данная задача очень похожа на задачу о "вставке на $K$-ю позицию в очередь".

Будем поддерживать очередь с приоритетом **на максимум** размером не более $K$ .

Если после добавления значения размер очереди станет строго больше $K$ - удалим максимальный элемент.

Таким образом $K$-я порядковая статистика всегда будет находиться на вершине искомой очереди.

### Пример реализации на С++

```cpp
void push(T value) {
  top_heap.push(value);

  if (top_heap.size() > k) {
    top_heap.pop();
  }
```

## K-ая порядковая статистика с удалениями

### Условие

Дано целое число $K$ и $Q$ запросов "добавить значение $v$" или "удалить добавленное ранее значение $v$".

После каждого запроса вывести $K$-ю порядковую статистику (если в наличии $K$ или более значений).

### Идея решения

Применим идею из прошлой задачи, но добавим вторую очередь с приоритетом **на минимум** - она будет хранить статистики с номерами $(K + 1)$ и более.

В таком случае, когда размер первой очереди становится больше $K$, максимальный элемент не удаляется, а перекидывается во вторую очередь.

Если запрос удаления должен удалить значение из первой очереди - то в неё перекидывается минимальный элемент из второй очереди.

Таким образом $K$-я порядковая статистика всегда будет находиться на вершине первой очереди.