# Применения обхода в глубину

## Вычисление функции от компоненты связности

### Дано

1. Пусть $F$ - функция от двух параметров (бинарная), обладающая свойствами

- **коммутативности**: $F(A, B) = F(B, A)$;
- **ассоциативности**: $F(A, F(B, C)) = F(F(A, B), C)$.

Примерами таких функций могут служить:

- сложение;
- минимум / максимум.

2. Каждой вершине $v$ сопоставлено значение $A_v$.

3. Задана вершина $S$, входящая в компоненту связности $C = (v_1, v_2, \dots, v_k)$.

Требуется вычислить значение $F(A_{v_1}, A_{v_2}, \dots, A_{v_k})$.

### Решение

Запустим обход в глубину от вершины $S$.

При обработке вершины $v$

- инициализируем результат $res_v$ значением $A_v$ (обработка **на входе**)
- для каждого необработанного соседа $to$ вычислим рекурсивно результат $res_to$;
- "объединим" результаты $res_v = F(res_v, res_to)$ (обработка **ребра**);
- вернём результат $res_v$ из рекурсии (обработка **на выходе**).

### C++

```cpp

res_t dfs(int v) {
  visited[v] = true;

  int res_v = a[v];
  for (int to : graph[v]) {
    if (visited[to]) continue;

    int res_to = dfs(to);
    res_v = F(res_v, res_to);
  }

  return res_v;
}

```
