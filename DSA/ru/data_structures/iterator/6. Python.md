# Итератор в Python

Итератором может быть любой объект, содержащий метод `__next__(self)`:

- производит переход к следующему элементу;
  - если следующего элемента нет - выбрасывается исключение `StopIteration`
- возвращает новое значение.

## Генератор

**Генератор** - простая форма итератора, реализуемая через operator `yield`:

- возвращает значение, переданное в `yield`;
- передаёт управление внешнему коду до следующего вызова `__next__`.

```py
def generate_ints(N):
   for i in range(N):
       yield i
```

## Внешние операции

Существует операция `next(it)`, по сути являющаяся обёрткой для непосредственного вызова `__next__` вне `for-each` цикла.

```py
gen = generate_ints(3)
gen
<generator object generate_ints at ...>
next(gen)
0
next(gen)
1
next(gen)
2
next(gen)
Traceback (most recent call last):
  File "stdin", line 1, in <module>
  File "stdin", line 2, in generate_ints
StopIteration
```

# Последовательность в Python

Последовательностью может быть любой объект, содержащий метод `__iter__(self)`, возвращающий объект итератора (сравните с Java).

Итератор тоже может быть последовательностью при необходимости.

## Foreach

Любая последовательность может быть проитерирована в формате:

```py
for value in sequence:
  # process value
```

## Вспомогательные функции

Для последовательностей определены утильные функции, например:

- `enumerate` - перебирает пары $(pos, value)$ - по сути индексирует последовательность;
- `zip` - перебирает пары $(a_p, b_p)$ для двух последовательностей $a$ и $b$.