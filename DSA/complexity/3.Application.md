# Операции над асимптотиками

## Сложение

Пусть алгоритм $T$ состоит из последовательного выполнения алгоритмов $F$, $G$, $H$. 

	Алгоритм T(N) {
		F(N);
		G(N);
		H(N);
	}

В таком случае асимптотика $O(T(N))$ будет равна **сумме** асимптотик $O(F(N) + G(N) + H(N))$.

## Умножение

Пусть алгоритм $T$ состоит из $M$ итераций выполнения алгоритма $F$.

 	Алгоритм T(N) {
		Повторить M раз {
			F(N);
		}
  	}

В таком случае асимптотика $O(T(N))$ будет равна **произведению** асимптотик $O(M \cdot F(N))$.

# Часто используемые асимптотики

Рассмотрим функции, используемые наиболее часто при описании асимптотики того или иного алгоритма.

Для каждой приведем верхнюю **оценку** $N$, при которой данная функция "умещается в секунду" (значение порядка $10^7 - 10^8$).

## O(1) - константа

Любая операция, считающаяся не зависящей от размера параметров (близкое к фиксированному количество тактов):

### Примеры

- Арифметические операции;
- Условный оператор;
- Обращение к элементу массива;
- И т.д.

## O(logN) - логарифм

### Примеры

- Количество цифр или бит в числе $N$;
- Количество целочисленных делений числа $N$ на $A$ вплоть до $0$;

<details> <summary> </summary>

div - целочисленное деление.
  
	Алгоритм F(N, A) {
		Пока (N > 0) {
			N = N div A;
		}
	}

</details>

- Деление и вычисление остатка ("быстрый" логарифм).
- Сложение и вычитание [длинных чисел](https://ru.wikipedia.org/wiki/Длинная_арифметика).

### Верхняя оценка N

По определению для любого целого числа, представимого в $64$-битном типе, логарифм не превышает $64$.

Поэтому обычно логарифм не является ограничением на $N$, но его важно учитывать при перемножении асимптотик.

## O(N) - линейная

### Примеры

- Количество элементов в массиве / символов в строке длины $N$;
- Количество целых чисел от $1$ до $N$.
- Сумма убывающей геометрической прогрессии $\frac{N}{1} + \frac{N}{B} + \dots + \frac{N}{B^K}$ при $B > 1$.

### Верхняя оценка N

Если говорить именно про $O(N)$ операций, то обычно $N \le 10^6 - 10^7$.

С другой стороны, зачастую $N$ - суммарный размер входных данных.

Так как вы должны успеть прочесть / сгенерировать все входные данные за $O(N)$, то и любая обработка $O(1)$ за "размер ввода" должна заходить.

## O(N^2) - квадратичная

### Примеры

- Сортировка массива длины $N$ **пузырьком** / **вставками** / **выборкой**.
- Сумма целых чисел от $1$ до $N$.
- Количество пар натуральных чисел $(i, j)$, где $1 \le i \le j \le N$.
- Количество **подотрезков** строки длины $N$ (т.к. каждый подотрезок задаётся парой индексов $1 \le i \le j \le N$).

### Верхняя оценка N

Формально $N \le 10^4$.

Но всё очень сильно зависит от асимптотики и константы отдельных операций.

Чаще всего можно встретить $O(N^2)$ при $N \le 2 \cdot 10^3 - 5 \cdot 10^3$.

## O(NlogN) - "полилог"

### Примеры

- Нижняя граница для сортировок, основанных на попарных сравнениях элементов: **быстрая** / **слиянием** / **пирамидальная**.
- Сумма гармонического ряда $\frac{N}{1} + \frac{N}{2} + \dots + \frac{N}{N}$.

**Интересно**:

Фактически нижняя граница для сортировок сравнениями равна $\log_2{(N!)}$ попарных сравнений.

### Верхняя оценка N

Операции в решениях за полилог очень сильно варьируются по константе.

**Раньше** $N \le 10^5$ считалось "эталонным" ограничением, но с ростом производительности граница **сдвинулась к** $N \le 3 \cdot 10^5 - 10^6$.

## O(sqrtN) - квадратный корень

### Примеры

- Поиск делителей числа $N$;
- Максимальный $K$ такой, что сумма $1 + 2 + \dots + K \le N$.

### Верхняя оценка N

Формально $N \le 10^{14} - 10^{16}$, но обычно в задачах на такую асимптотику встречается $N \le 10^{12}$.

## O(2^n) - 2 в степени N

### Примеры

- Количество способов выбрать подмножество элементов из набора размером $N$.
- Количество **подпоследовательностей** строки длины $N$ (т.к. каждая подпоследовательность задаётся подмножеством взятых индексов).
- Количество различных битовых (двоичных) масок из $N$ бит каждая.
- Количество вершин в полном двоичном дереве с глубиной $N$.

### Верхняя оценка N

Для чистого $O(2^N)$ стандартная оценка $N \le 24 - 26$.

Часто в решениях встречается асимптотика $O(N \cdot 2^N)$, для которой оценка понижается до $N \le 20 - 22$.

## O(N!) - факториал

### Примеры

- Произведение целых чисел от $1$ до $N$.
- Количество [перестановок](https://ru.wikipedia.org/wiki/Перестановка) для набора из $N$ уникальных значений.

### Верхняя оценка N

Решение за $O(N!)$ - это в подавляющем большинстве случаев полный перебор.

Для решения за чистый $O(N!)$ можно использовать оценку в $N \le 11$.

Зачастую переборы пишутся за $O(N \cdot N!)$, поэтому оценка может снижаться до $N \le 9 - 10$.

## Упражнения

- [Асимптотика по коду](4.Exercises.md#упражнение-асимптотика-по-коду)
- [Непростые доказательства](4.Exercises.md#упражнение-непростые-доказательства)
