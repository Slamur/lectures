# Асимптотика алгоритма

## Количество операций как функция от параметров

### Важные операции

Для любого алгоритма можно выделить набор простых операций, составляющих его логическую основу.

Например,

- для вычисления суммы целых чисел от $1$ до $N$ с помощью цикла такой операцией будет сложение.  
- для большинства сортировок такими операциями являются сравнение на больше/меньше и обращение по индексу.

Будем называть такие операции **важными**.

### "Достаточно" эффективный алгоритм

Допустим, что у нас есть алгоритм, зависящий от одного целого числа $N$.

Обозначим через $T(N)$ функцию, вычисляющую количество **важных** операций нашего алгоритма для заданного $N$.

Будем считать алгоритм **достаточно эффективным**, если значение $T(N)$ укладывается в заданные границы сверху.

## Асимптотика - функция проще, поведение то же

Зачастую найти аналитический вид функции $T(N)$ для количества важных операций бывает слишком сложно.

В то же время нас не интересует точное количество, а лишь его **оценка**.

Поэтому для упрощения вычисления вместо $T(N)$ используется её **асимптотика** - функция $F(N)$ со следующими свойствами:

- Функция $F(N)$ является оценкой сверху для $T(N)$;
- В идеале функция $F(N)$ ведёт себя **аналогично** $T(N)$.
- Из всех таких $F(N)$ выбирается функция с наименьшим количеством слагаемых и коэффициентов.

### Формальное определение

Будем называть функцию $F(N)$ **асимптотикой** алгоритма с количеством операций $T(N)$, если 

- $T(N) = \Theta(F(N))$
	- В специфичных случаях достаточно $T(N) = O(F(N))$;	
- $F(N)$ содержит лишь **несравнимые** слагаемые.
- Коэффициенты при слагаемых равны $1$.
- $F(N)$ не содержит слагаемых и множителей, не зависящих от параметров алгоритма (если у вас такие есть, то сделайте их параметрами).

**Определение**: Слагаемые $X(N)$ и $Y(N)$ назовём **несравнимыми**, если 

- $X(N) \ne O(Y(N))$
- $Y(N) \ne O(X(N))$

### Примеры

#### Пример 1

$F(N) = N^2$ **является** асимптотикой для $T(N) = 3 \cdot N^2 + 20$.

**Доказательство**:

<details> <summary> </summary>

- $T(N) = O(F(N))$ - см. пример 1 к определению "О большого".
- $T(N) = \Omega(F(N))$ - существуют $C = 1$ и $N_0 = 1$ такие, что $N^2 \le 1 \cdot (3 \cdot N^2 + 2)$ для $N \ge 1$.
- Коэффициент при слагаемом $N^2$ равен $1$.
  
</details>

По сути, это означает, что функцию $N^2$ удобно использовать для оценки поведения функции $3 \cdot N^2 + 20$ на больших $N$.

Например, при увеличении $N$ в $10$ раз обе функции $F(N)$ и $T(N)$ вырастут примерно в $100$ раз.

#### Пример 2

$F(N, M) = N^2 + M \cdot N + M^3$ **является** асимптотикой для $T(N, M) = N^2 + 3 \cdot M \cdot N + \frac{M^3}{10} + 100 \cdot M^2 + 20$

**Доказательство**:

<details> <summary> </summary>

- $T(N, M) = O(F(N, M))$ - существуют $C = 3$, $N_0 = 1$ и $M_0 = 100$ такие, что

  $N^2 + 3 \cdot M \cdot N + \frac{M^3}{10} + 100 \cdot M^2 + 20 \le 4 \cdot (N^2 + M \cdot N + M^3)$ для $N \ge 1$ и $M \ge 100$.
  
- $T(N, M) = \Omega(F(N, M))$ - cуществуют $C = 10$, $N_0 = 1$, $M_0 = 1$ такие, что

  $N^2 + M \cdot N + M^3 \le 10 \cdot (N^2 + 3 \cdot M \cdot N + \frac{M^3}{10} + 100 \cdot M^2 + 20)$ для $N \ge 1$ и $M \ge 1$.
  
- Коэффициенты при слагаемых $N^2$, $M \dot N$, $M^3$ равны $1$;
  
- $M^3$ сравнимо с $M^2$, поэтому $M^2$ не включено в $F(N, M)$.
  
- $20$ не зависит от параметров, поэтому $20$ не включено в $F(N, M)$.

</details>

**Примечание**:

<details> <summary> </summary>

Можно заметить, что 

- если $M \le N$, то $M \cdot N \le N^2$;
- если $N \le M$, то $M \cdot N \le M^3$.

Из чего можно сделать вывод, что на самом деле $F(N, M) = N^2 + M^3$. 

Да, такая оценка возможна, но в большинстве случаев вам будет достаточно простого способа анализа, приведенного в примере.

</details>

#### Пример 3

$F(N) = N^3$ **не является** асимптотикой для $T(N) = 3 \cdot N^2 + 20$.

**Доказательство**:

<details> <summary> </summary>

$T(N) \ne \Omega(F(N))$: для всех $C \ge 0$ неравенство $N^3 \le C \cdot (3 \cdot N^2 + 2)$ выполняется только для $N \le 3 \cdot C$.

По сути $N^3$ является "оценкой сверху", но растёт значительно быстрее, чем $3 \cdot N^2 + 20$. 

Получается, что на больших $N$ оценка через $N^3$ будет слишком **пессимистичной** для анализа.

</details>

#### Пример 4

$F(N) = N$ **не является** асимптотикой для $T(N) = 3 \cdot N^2 + 20$.

**Доказательство**:

<details> <summary> </summary>

$T(N) \ne O(F(N))$ - см. пример 3 из определения "О большого".

По сути, независимо от выбора $C$ функция $C \cdot N$ растёт значительно медленнее, чем $3 \cdot N^2 + 20$.

Получается, что на больших $N$ оценка через $С \cdot N$ будет слишком **оптимистичной** для анализа.

</details>

#### Пример 5

$F(N) = N^2 + N$ **не является** асимптотикой для $T(N) = 3 \cdot N^2 + 20$.

**Доказательство**:

<details> <summary> </summary>
	
Слагаемые $N^2$ и $N$ сравнимы между собой, так как $N = O(N^2)$.

Для простоты описания в асимптотике оставляют только **важные для оценки** слагаемые - в данном случае это $N^2$.

При проверке на "О большое" для функций $N^2$ и $N^2 + N$ будет отличаться лишь константа $C$ (но не факт её наличия).

</details>

#### Пример 6

$F(N) = 2 \cdot N^2$ **не является** асимптотикой для $T(N) = 3 \cdot N^2 + 20$.

**Доказательство**:

<details> <summary> </summary>
	
Коэффициент при слагаемом $N^2$ равен $2 \ne 1$.

Для простоты описания в качестве асимптотик используют функции без лишних коэффициентов - в данном случае это $N^2$.

При проверке на "О большое" для функций $N^2$ и $2 \cdot N^2$ будет отличаться лишь константа $C$ (но не факт её наличия).

</details>

## Выводы

- Эффективность алгоритма часто оценивают через количество "важных" операций.
- Выражение точного количества таких операций может быть очень затратным.
- Поэтому вместо точной функции используют асимптотику - более простую функцию, связанную с точным количеством соотношением $\Theta$.
- Для унификации в асимптотике не используют константные множители и сравнимые слагаемые.

## Упражнения

- [О большое и асимптотика](4.Exercises.md#упражнение-о-большое-и-асимптотика)
